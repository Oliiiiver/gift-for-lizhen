<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»™æç¥¯çš„å¥‡è¿¹åº”æ´ âœ¨</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&family=Noto+Serif+SC:wght@500&display=swap" rel="stylesheet">
    <style>
        /* --- æ ¸å¿ƒå˜é‡ --- */
        :root {
            --primary-green: #5D8C62;
            --soft-white: #FDFBF7;
            --sky-top: #89C4F4;  /* åŠ¨æ¼«è“ */
            --sky-bottom: #D4F1F4;
            --accent-orange: #FF8C42; 
        }

        /* --- åŸºç¡€è®¾ç½® (ä¿®å¤èƒŒæ™¯è¢«é®æŒ¡çš„å…³é”®) --- */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            font-family: 'ZCOOL KuaiLe', cursive;
            /* å»æ‰äº†èƒŒæ™¯è‰²ï¼Œé˜²æ­¢é®æŒ¡é£æ™¯ */
        }

        /* --- 0. å¯åŠ¨é¡µ --- */
        #start-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #89C4F4; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 1s; cursor: pointer;
        }
        #start-overlay h1 { color: white; font-size: 3em; animation: bounce 2s infinite; text-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .start-hint { margin-top: 20px; color: white; font-size: 1.5em; background: rgba(255,255,255,0.3); padding: 10px 30px; border-radius: 30px; }

        /* --- 1. å…¨æ–°å‡çº§ï¼šå‰åœåŠ›ç»˜æœ¬é£ç«¥è¯èƒŒæ™¯ --- */
        #scenery-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; overflow: hidden;
            /* å¤©ç©ºåŸºè°ƒï¼šæ›´æŸ”å’Œçš„è“ç»¿æ¸å˜ */
            background: linear-gradient(to bottom, #A1C4FD 0%, #C2E9FB 60%, #D4F1F4 100%);
        }

        /* å…¨å±€çº¹ç†å åŠ ï¼šæ¨¡æ‹Ÿè€çº¸å¼ /æ°´å½©ç”»çš„é¢—ç²’æ„Ÿ */
        #scenery-container::after {
            content: '';
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            /* ä¸€ä¸ªæå…¶å¾®å°çš„å™ªç‚¹å›¾æ¡ˆï¼Œç”¨äºæ‰“ç ´æ•°å­—æ„Ÿ */
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            pointer-events: none;
            mix-blend-mode: overlay;
            opacity: 0.4;
            z-index: 10;
        }

        /* --- å…‰å½±é­”æ³•ï¼šä¸è¾¾å°”å…‰æŸ± (God Rays) --- */
        .god-rays {
            position: absolute;
            top: -20%; right: -10%;
            width: 100%; height: 150%;
            background: repeating-linear-gradient(
                -45deg,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.1) 5%,
                rgba(255, 255, 255, 0) 10%
            );
            transform-origin: top right;
            animation: rayRotate 60s linear infinite;
            pointer-events: none;
            mix-blend-mode: soft-light;
        }

        /* å‡çº§ç‰ˆå¤ªé˜³ï¼šæ›´æŸ”å’Œçš„å…‰æ™• */
        .sun {
            position: absolute; top: 5%; right: 8%; width: 120px; height: 120px;
            background: radial-gradient(circle, #FFFBEA 10%, rgba(255,241,190,0.8) 40%, rgba(255,255,255,0) 70%);
            border-radius: 50%;
            filter: blur(10px);
            animation: glow 6s infinite alternate ease-in-out;
        }

        /* --- æ°´å½©é£äº‘æœµ (ä½¿ç”¨box-shadowå †å åˆ¶é€ è“¬æ¾æ„Ÿ) --- */
        .cloud-painterly {
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            /* å…³é”®ï¼šç”¨å¤šå±‚æŸ”ç„¦é˜´å½±æ¨¡æ‹Ÿæ°´å½©æ™•æŸ“ */
            box-shadow: 
                30px 10px 40px rgba(255, 255, 255, 0.9),
                -30px 10px 40px rgba(255, 255, 255, 0.9),
                0px 40px 60px rgba(230, 245, 255, 0.6);
        }
        .c1 { width: 180px; height: 60px; top: 18%; left: -200px; animation: floatCloud 50s linear infinite; opacity: 0.9; }
        .c2 { width: 250px; height: 80px; top: 28%; left: -300px; animation: floatCloud 70s linear infinite 8s; opacity: 0.7; transform: scale(1.2); }
        .c3 { width: 120px; height: 40px; top: 10%; left: -150px; animation: floatCloud 35s linear infinite 20s; opacity: 0.6; }

        /* --- å±‚æ¬¡ä¸°å¯Œçš„å±±ä¸˜ --- */
        
        /* è¿œå±±ï¼šç©ºæ°”æ„Ÿï¼Œè“è‰²è°ƒï¼Œæœ¦èƒ§ */
        .mountain-far {
            position: absolute; bottom: 15%; left: -20%; width: 150%; height: 400px;
            background: linear-gradient(to bottom, #89a7b1 0%, #a3c6d0 100%);
            border-radius: 100% 100% 0 0; opacity: 0.6;
            filter: blur(2px);
        }

        /* ä¸­æ™¯å±±ï¼šå—å…‰é¢ï¼Œå¸¦ä¸€ç‚¹æš–ç»¿ */
        .mountain-mid {
            position: absolute; bottom: 5%; right: -30%; width: 140%; height: 450px;
            background: linear-gradient(15deg, #6FA38B 20%, #8FBDA6 80%);
            border-radius: 80% 100% 0 0;
            box-shadow: inset 0 10px 30px rgba(255,255,255,0.2); /* é¡¶éƒ¨å—å…‰ */
        }
        /* ä¸­æ™¯è£…é¥°ï¼šä¸€äº›æ¨¡ç³Šçš„å°æ ‘ä¸› */
        .mountain-mid::after {
            content: ''; position: absolute; bottom: 380px; left: 30%;
            width: 60px; height: 60px; background: #5A8A75; border-radius: 50%;
            box-shadow: 80px 20px 0 #5A8A75, 150px -10px 0 50px #5A8A75;
            filter: blur(5px); opacity: 0.6;
        }

        /* å‰æ™¯è‰åœ°ï¼šç»†èŠ‚ä¸°å¯Œï¼Œè‰²å½©æ·±æ²‰ */
        .grass-front {
            position: absolute; bottom: -80px; width: 120%; height: 280px; left: -10%;
            /* ä½¿ç”¨å¾„å‘æ¸å˜æ¨¡æ‹Ÿèµ·ä¼å’Œå…‰å½± */
            background: radial-gradient(ellipse at top center, #7EB293 0%, #4A7045 60%, #2E4F2B 100%);
            border-radius: 50% 80% 0 0;
            transform: rotate(-3deg);
            box-shadow: 0 -10px 20px rgba(0,0,0,0.1);
        }
        /* å‰æ™¯è£…é¥°ï¼šæ›´æ¸…æ™°çš„æ¤è¢«å‰ªå½± */
        .grass-front::before {
            content: 'ğŸŒ¿'; font-size: 40px; position: absolute; top: 30px; left: 15%; 
            color: #365A33; text-shadow: 50px 20px 0 #2E4F2B, 120px -10px 0 #365A33; opacity: 0.5;
        }

        /* å‰æ™¯é®æŒ¡çŒæœ¨ï¼ˆå¢åŠ æ™¯æ·±ï¼‰ */
        .bush-foreground {
            position: absolute; bottom: -30px;
            background: #2A4828; border-radius: 50%;
            filter: blur(1px);
        }
        .bf1 { width: 150px; height: 120px; left: -20px; box-shadow: 80px 30px 0 #335230; }
        .bf2 { width: 180px; height: 140px; right: -30px; box-shadow: -90px 40px 0 #2E4F2B; }

        /* é£˜è½çš„èŠ±ç“£/å…‰ç‚¹å®¹å™¨ (æ²¿ç”¨ä¹‹å‰çš„ï¼Œå¾ˆå¥½) */
        #particle-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5;
        }

        /* åŠ¨ç”»ä¼˜åŒ– */
        @keyframes floatCloud { from { transform: translateX(-100px); } to { transform: translateX(130vw); } }
        @keyframes glow { from { transform: scale(1); opacity: 0.9; } to { transform: scale(1.1); opacity: 0.7; } }
        @keyframes rayRotate { from { transform: rotate(0deg); } to { transform: rotate(10deg); } }


        /* --- 2. ä¸»å®¹å™¨ï¼šç¬”è®°æœ¬é£æ ¼ --- */
        .main-notebook {
            max-width: 700px;
            margin: 60px auto;
            background: var(--soft-white);
            border-radius: 10px;
            /* å¢åŠ å±‚çº§ï¼Œç¡®ä¿åœ¨é£æ™¯ä¸Šé¢ */
            position: relative;
            z-index: 10; 
            
            box-shadow: 
                0 0 0 5px rgba(255,255,255,0.3),
                0 30px 60px rgba(0,50,0,0.3);
            padding: 40px;
            min-height: 80vh;
            background-image: repeating-linear-gradient(#FDFBF7 0px, #FDFBF7 29px, #E1E8EE 30px);
        }
        
        /* èºæ—‹è£…è®¢å­” */
        .main-notebook::after {
            content: ''; position: absolute; left: 15px; top: 20px; bottom: 20px; width: 10px;
            border-left: 3px dotted #bbb;
        }

        h1.page-title {
            text-align: center; color: #556B2F; font-size: 2.2em;
            margin-bottom: 40px; text-shadow: 2px 2px 0 #fff;
        }

        /* --- 3. æ¨¡å—é€šç”¨æ ·å¼ --- */
        .section-card {
            background: white; border: 2px solid #E0E0E0; border-radius: 15px;
            padding: 25px; margin-bottom: 30px; position: relative;
            box-shadow: 5px 5px 0px rgba(0,0,0,0.05); transition: transform 0.2s;
            margin-left: 20px; /* é¿å¼€è£…è®¢çº¿ */
        }
        .section-card:hover { transform: translateY(-2px); box-shadow: 5px 8px 0px rgba(0,0,0,0.1); }
        .section-icon { position: absolute; right: 10px; top: -15px; font-size: 2.5em; background: white; padding: 0 5px; border-radius: 50%; }

        /* æ¯æ—¥æ¿€åŠ± */
        #daily-quote { font-size: 1.2em; color: #444; text-align: center; min-height: 50px; line-height: 1.6; }
        .btn-flower { background: #FF9AA2; color: white; border: none; padding: 8px 25px; border-radius: 20px; display: block; margin: 15px auto 0; cursor: pointer; font-family: inherit; }

        /* ç„¦è™‘ç«ç‚‰ */
        .calcifer-box { display: flex; gap: 8px; margin-top: 15px; }
        .calcifer-btn { background: var(--accent-orange); color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; white-space: nowrap;}
        #anxiety-input { flex: 1; padding: 10px; border: 2px solid #ddd; border-radius: 8px; outline: none; font-family: inherit; }

        /* ç­”é¢˜éƒ¨åˆ† */
        .quiz-container { position: relative; min-height: 250px; margin-top: 20px; }
        .quiz-step { display: none; animation: slideIn 0.4s ease; }
        .quiz-step.active { display: block; }
        
        .quiz-question-text { font-size: 1.2em; font-weight: bold; color: #2E7D32; display: block; margin-bottom: 15px; }
        .quiz-option-btn {
            background: #F1F8E9; border: 1px solid #C5E1A5; padding: 12px; border-radius: 8px;
            margin-bottom: 8px; cursor: pointer; transition: 0.2s; font-size: 1em;
        }
        .quiz-option-btn:hover { background: #DCEDC8; transform: translateX(5px); }
        .quiz-option-btn.selected { background: #AED581; color: white; border-color: #7CB342; }
        .input-line { border: none; border-bottom: 2px dashed #888; background: transparent; width: 100%; font-size: 1.1em; outline: none; padding: 5px 0; }

        .quiz-controls { display: flex; align-items: center; margin-top: 20px; gap: 15px; }
        .progress-bar { flex: 1; height: 10px; background: #eee; border-radius: 5px; overflow: hidden; }
        .progress-fill { height: 100%; background: #66BB6A; width: 0%; transition: width 0.3s; }
        .btn-next { background: #26A69A; color: white; border: none; padding: 10px 25px; border-radius: 20px; cursor: pointer; font-family: inherit; }

        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }

        /* --- å¼¹çª— (æ•´åˆäº†ä½ çš„ç¾Šçš®å·ä»£ç ) --- */
        .modal { 
            display: none; 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.8); /* èƒŒæ™¯æ”¹æ·±ä¸€ç‚¹ï¼Œçªå‡ºä¸­é—´çš„é­”æ³•ä¿¡ */
            z-index: 2000; 
            justify-content: center; align-items: center; 
            overflow-y: auto; /* é˜²æ­¢å°å±å¹•æ˜¾ç¤ºä¸å…¨ */
        }
        
        /* åˆ®åˆ®ä¹ */
        .scratch-wrapper { border: 4px solid #8D6E63; border-radius: 10px; width: 280px; height: 140px; margin: 0 auto; position: relative; overflow: hidden; }
        
        /* éŸ³ä¹æŒ‰é’® */
        .music-control { position: fixed; bottom: 20px; right: 20px; width: 45px; height: 45px; background: white; border-radius: 50%; box-shadow: 0 4px 10px rgba(0,0,0,0.2); display: flex; justify-content: center; align-items: center; cursor: pointer; z-index: 1000; font-size: 20px; }
        .soot { position: absolute; width: 12px; height: 12px; background: #333; border-radius: 50%; pointer-events: none; z-index: 9999; }

    </style>
</head>
<body>

    <div id="start-overlay" onclick="enterWorld()">
        <h1>ğŸƒ ç¥¯ç¥¯çš„å¤‡è€ƒä¸–ç•Œ</h1>
        <div class="start-hint">ğŸ‘‰ ç‚¹å‡»è¿›å…¥é­”æ³•åº­é™¢ ğŸ‘ˆ</div>
        <p style="color:white; margin-top:10px; font-size: 0.9em;">(è®°å¾—æ‰“å¼€å£°éŸ³å“¦)</p>
    </div>

    <audio id="bgm" loop>
        <source src="arrietty.mp3" type="audio/mp3">
        <source src="https://commondatastorage.googleapis.com/codeskulptor-assets/Epoq-Lepidoptera.ogg" type="audio/ogg"> 
    </audio>

<div id="scenery-container">
        <div class="god-rays"></div>
        <div class="sun"></div>
        
        <div class="cloud-painterly c1"></div>
        <div class="cloud-painterly c3"></div>
        <div class="cloud-painterly c2"></div>
        
        <div class="mountain-far"></div>
        <div class="mountain-mid"></div>
        <div class="grass-front"></div>
        
        <div class="bush-foreground bf1"></div>
        <div class="bush-foreground bf2"></div>

        <div id="particle-container"></div>
    </div>

    <div class="main-notebook">
        <h1 class="page-title">âœ¨ è€ƒå‰èƒ½é‡è¡¥ç»™ç«™ âœ¨</h1>

        <div class="section-card">
            <div class="section-icon">â˜€ï¸</div>
            <h3>ä»Šæ—¥ä»½å…ƒæ°”</h3>
            <div id="daily-quote">åŠ è½½ä¸­...</div>
            <button class="btn-flower" onclick="updateQuote()">ğŸŒ¸ æ¢ä¸€å¥</button>
        </div>

        <div class="section-card">
            <div class="section-icon">ğŸ”¥</div>
            <h3>å¡è¥¿æ³•çš„ç„¦è™‘ç«ç‚‰</h3>
            <p style="color:#666; font-size:0.9em;">æŠŠä½ æ­¤åˆ»çš„æ‹…å¿§å†™ä¸‹æ¥ï¼Œå¡è¥¿æ³•ä¼šå¸®ä½ åƒæ‰ï¼</p>
            <div class="calcifer-box">
                <input type="text" id="anxiety-input" placeholder="ä¾‹å¦‚ï¼šèƒŒä¹¦èƒŒå¾—æƒ³å...">
                <button class="calcifer-btn" onclick="burnAnxiety()">ğŸ”¥ çƒ§æ‰å®ƒï¼</button>
            </div>
        </div>

        <div class="section-card">
            <div class="section-icon">ğŸ“</div>
            <h3>è€ƒå‰æœ€åä¸€å¥—â€œçœŸé¢˜â€</h3>
            
            <div class="quiz-container" id="quiz-box">
                </div>

            <div class="quiz-controls">
                <div class="progress-bar"><div class="progress-fill" id="prog-fill"></div></div>
                <button class="btn-next" onclick="nextQuestion()">ä¸‹ä¸€é¢˜ â¡ï¸</button>
            </div>
        </div>

        <div class="section-card">
            <div class="section-icon">ğŸ’</div>
            <h3>å‡ºå‘å‰æ£€æŸ¥</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 1.1em;">
                <label><input type="checkbox"> ğŸ†” èº«ä»½è¯</label>
                <label><input type="checkbox"> ğŸ« å‡†è€ƒè¯</label>
                <label><input type="checkbox"> ğŸ‘œ æ–‡å…·è¢‹</label>
                <label><input type="checkbox"> ğŸ–Šï¸ é»‘ç¬” x3</label>
                <label><input type="checkbox"> âœï¸ 2Bé“…ç¬”</label>
                <label><input type="checkbox"> ğŸ§½ æ©¡çš®</label>
                <label><input type="checkbox"> ğŸ§˜â€â™€ï¸ å¹³å¸¸å¿ƒ</label>
                <label><input type="checkbox"> âœ¨ è‡ªä¿¡</label>
            </div>
        </div>

        <div class="section-card" style="text-align: center;">
            <h3>ğŸ‰ é¢„æ”¯åº†åŠŸåˆ¸</h3>
            <div class="scratch-wrapper">
                <div style="position: absolute; width:100%; height:100%; top:0; left:0; display:flex; flex-direction:column; justify-content:center; align-items:center; background:#FFD54F; color:#5D4037; font-weight:bold;">
                    <span>ğŸ‚ è¿Ÿåˆ°çš„ç”Ÿæ—¥ç¤¼ç‰©</span>
                    <span>+</span>
                    <span>ğŸ ç¥ç§˜å¤§ç¤¼ï¼</span>
                </div>
                <canvas id="scratch-canvas" width="280" height="140" style="position: relative; z-index: 2; cursor: pointer;"></canvas>
            </div>
        </div>
    </div>

    <div class="modal" id="result-modal">
        
        <div style="
            background: radial-gradient(circle at center, #2b32b2 0%, #141e30 100%);
            padding: 40px 20px;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            font-family: 'Georgia', 'Songti SC', 'SimSun', serif;
            color: #fff;
            max-width: 600px;
            width: 90%; /* é€‚é…æ‰‹æœºå®½åº¦ */
            margin: 0 auto;
            border: 1px solid #4ca1af;
            max-height: 90vh; /* é˜²æ­¢å¤ªé«˜è¶…å‡ºå±å¹• */
            overflow-y: auto;
        ">

            <div style="
                background: #fffaf0; /* ç¾Šçš®çº¸è‰² */
                color: #2c3e50;
                padding: 30px;
                border-radius: 8px;
                position: relative;
                box-shadow: 0 10px 25px rgba(0,0,0,0.3);
                border: 2px solid #d4af37; /* é‡‘è‰²è¾¹æ¡† */
                outline: 4px double #d4af37;
                outline-offset: -10px;
            ">
                
                <div style="text-align: center; margin-bottom: 20px; color: #d4af37; font-size: 1.5em;">
                    âœ¦ â˜¾ âœ¦
                </div>

                <h3 style="
                    color: #8e44ad; 
                    margin-top: 0; 
                    font-size: 1.3em; 
                    border-bottom: 1px dashed #d4af37; 
                    padding-bottom: 10px;
                    display: inline-block;
                ">
                    äº²çˆ±çš„æç¥¯ï¼š
                </h3>

                <p style="line-height: 1.8; font-size: 1.05em; margin-top: 20px;">
                    æ­å–œä½ å®Œæˆäº†è€ƒè¯•å‰çš„æœ€åä¸€å¥—çœŸé¢˜ï¼æˆ‘ç›¸ä¿¡ä½ å·²ç»åšå¥½äº†å……è¶³çš„å‡†å¤‡ï¼Œå»é¢å¯¹è€ƒåœºä¸Šå¯èƒ½å‡ºç°çš„ä¸€åˆ‡è‰°éš¾é™©é˜»ã€‚
                </p>

                <p style="line-height: 1.8; font-size: 1.05em;">
                    æˆ‘æƒ³å¼•ç”¨ä½ æ›¾ç»å†™ç»™æˆ‘çš„è¯ï¼Œä½œä¸ºè€ƒå‰çš„æœ€åæ¿€åŠ±ï¼š
                </p>

                <div style="
                    background: #fdf6e3;
                    border-left: 4px solid #d4af37;
                    padding: 15px 20px;
                    margin: 20px 0;
                    border-radius: 0 10px 10px 0;
                    font-style: italic;
                    color: #5d4037;
                    position: relative;
                ">
                    <span style="font-size: 2em; line-height: 0.5; position: absolute; top: 10px; left: 5px; color: #d4af37; opacity: 0.5;">â€œ</span>
                    æˆ‘æƒ³æˆ‘ç»ˆäºåœ¨è¿™ä¸€åˆ»æ¥å—äº†å‘½è¿å®‰æ’çš„ä¸€åˆ‡ï¼Œæ¥å—æ‰€æœ‰ä¸å®Œæ»¡å’Œä¸ç”˜å¿ƒã€‚å½’é›¶ä¹‹åæ˜¯æ–°çš„ä¸€å±€ï¼Œä½†æˆ‘å·²ç†ŸçŸ¥è¿™æ¸¸æˆçš„è§„åˆ™ã€‚
                    <span style="font-size: 2em; line-height: 0.5; position: absolute; bottom: -5px; right: 10px; color: #d4af37; opacity: 0.5;">â€</span>
                </div>

                <p style="line-height: 1.8; font-size: 1.05em;">
                    åœ¨è¿™å¥è¯é‡Œï¼Œæˆ‘å†æ¬¡è§è¯äº†ä½ çš„åšæ¯…ä¸å†³å¿ƒã€‚
                </p>
                
                <p style="line-height: 1.8; font-size: 1.05em;">
                    æˆ‘å¸Œæœ›ï¼Œå½“ä½ çœ‹åˆ°è¿™æ®µè¯çš„æ—¶å€™ï¼Œå¯ä»¥æŠ›ä¸‹ä¸€è·¯ä»¥æ¥çš„ç„¦è™‘ä¸æ‹…å¿§ï¼Œå»æ‹¥æŠ±è¿™ä¸¤å¹´æ¥æ²‰ç”¸ç”¸çš„æˆé•¿ã€‚ä½ ä¸€å®šä¸ä¼šè¾œè´Ÿè‡ªå·±çš„åŠªåŠ›ï¼Œæˆ‘æ°¸è¿œæ”¯æŒä½ ~
                </p>

                <div style="
                    text-align: center; 
                    margin-top: 30px; 
                    font-weight: bold; 
                    color: #c0392b; 
                    letter-spacing: 2px;
                    font-size: 1.2em;
                ">
                    åŠ æ²¹åŠ æ²¹åŠ æ²¹ï¼ï¼ï¼ â¤ï¸
                </div>

            </div>
            
            <button onclick="document.getElementById('result-modal').style.display='none'" style="width:100%; padding:15px; background:#4ca1af; color:white; border:none; border-radius:30px; margin-top:20px; cursor:pointer; font-size:1.1em; font-weight:bold; box-shadow: 0 5px 15px rgba(76, 161, 175, 0.4);">
                ğŸ’Œ æ”¶ä¸‹è¿™ä»½ç¥ç¦
            </button>

        </div>
    </div>

    <div class="music-control" onclick="toggleMusic()">ğŸµ</div>

    <script>
        // --- æ ¸å¿ƒé€»è¾‘ ---

        // 0. éŸ³é¢‘
        const bgm = document.getElementById('bgm');
        function enterWorld() {
            document.getElementById('start-overlay').style.opacity = '0';
            setTimeout(() => document.getElementById('start-overlay').remove(), 1000);
            bgm.volume = 0.5;
            bgm.play().catch(e => console.log("ç­‰å¾…äº¤äº’æ’­æ”¾"));
        }
        function toggleMusic() { bgm.paused ? bgm.play() : bgm.pause(); }

        // 1. æ¯æ—¥æ¿€åŠ±
        const quotes = [
            "ä»Šå¤©ä¸æƒ³å­¦ï¼Ÿæ²¡å…³ç³»ï¼Œçˆ±å› æ–¯å¦ä¹Ÿæœ‰æƒ³æ‘†çƒ‚çš„æ—¶å€™ã€‚",
            "ä½ çš„å¤§è„‘æ­£åœ¨ç–¯ç‹‚æ‰©å®¹ï¼Œå‘çƒ­æ˜¯CPUå‡çº§çš„æ­£å¸¸ç°è±¡ï¼",
            "è€ƒç ”å°±åƒæ´—è¡£æœï¼Œä¸­é—´æ…å¾—å¾ˆä¹±ï¼Œæ´—å®Œå°±å¹²å‡€æ¸…çˆ½äº†ã€‚",
            "ä½ ä¸æ˜¯åœ¨èƒŒä¹¦ï¼Œä½ æ˜¯åœ¨å¾€è„‘å­é‡Œå­˜é‡‘æ¡ï¼",
            "ä¹¾å¤æœªå®šï¼Œä½ æˆ‘çš†æ˜¯é»‘é©¬ï¼",
            "æƒ³æƒ³è€ƒå®Œé‚£å¤©ï¼Œç«é”…å¥¶èŒ¶åœ¨å‘ä½ ç–¯ç‹‚æ‹›æ‰‹ï¼"
        ];
        function updateQuote() { document.getElementById('daily-quote').innerText = quotes[Math.floor(Math.random()*quotes.length)]; }
        updateQuote();

        // 2. ç„¦è™‘ç«ç‚‰
        function burnAnxiety() {
            const input = document.getElementById('anxiety-input');
            const btn = document.querySelector('.calcifer-btn');
            if(!input.value) return;

            confetti({ particleCount: 60, spread: 50, origin: { y: 0.7 }, colors: ['#FF4500', '#FFA500'] });
            
            input.style.transition = "0.5s";
            input.style.transform = "scale(0)";
            btn.innerText = "ğŸ”¥ åå™¬ä¸­...";
            
            setTimeout(() => {
                input.value = "";
                input.style.transform = "scale(1)";
                input.placeholder = "å—~ å‘³é“ä¸é”™ï¼è¿˜æœ‰å—ï¼Ÿ";
                btn.innerText = "ğŸ”¥ çƒ§æ‰å®ƒï¼";
            }, 1000);
        }

        // 3. é¢˜ç›®é€»è¾‘
        const qs = [
            { t: "s", q: "1. è°ä¼šåœ¨è€ƒç ”ä¸­å–å¾—æœ€ç†æƒ³çš„æˆç»©ï¼Ÿ", o: ["æç¥¯", "ç¥¯ç¥¯", "å°ç¥¯", "ä»¥ä¸Šéƒ½æ˜¯"] },
            { t: "s", q: "2. å½“è€ƒè¯•ä¸­é‡åˆ°ä¸ä¼šåšæˆ–è€—æ—¶å¾ˆä¹…çš„é¢˜ç›®æ—¶ï¼Œæ­£ç¡®çš„åº”å¯¹æ–¹æ¡ˆæ˜¯ï¼š", o: ["é‡åˆ°å›°éš¾ç¡å¤§è§‰", "æˆ‘è¦å’Œå®ƒæ­»ç£•åˆ°åº•ï¼ï¼ï¼", "å½“åœºæ’•è¯•å·ï¼Œéœ‡æƒŠå…¨è€ƒåœº","æ­¤æ—¶ä¸è’™æ›´å¾…ä½•æ—¶ï¼Œå…ˆåšä¸‹ä¸€é¢˜"] },
            { t: "s", q: "3. åè¯è§£é‡Šé¢˜æˆ–æ”¿æ²»å¤§é¢˜æƒ³ä¸èµ·æ¥åŸè¯ï¼Œåº”è¯¥ï¼š", o: ["ç©ºç€", "ç”¨è‡ªå·±çš„è¯ï¼Œç»“åˆå…³é”®è¯ï¼ŒæŠŠå·å­å†™æ»¡ï¼", "ç”»ä¸ªæµ·ç»µå®å®", "å†™æ»¡é©¬å…‹æ€çš„åå­—"] },
            { t: "s", q: "4. ä¸‹åˆ—å“ªé¡¹æ˜¯è€ƒè¯•å¿…å¤‡ï¼Ÿ", o: ["çŸ¥è¯†", "æŠ€å·§", "ç›¸ä¿¡è‡ªå·±é…å¾—ä¸Šç ”ç©¶ç”Ÿçš„è‡ªä¿¡", "ä»¥ä¸Šéƒ½æ˜¯"] },
            { t: "s", q: "5. æ­£ç¡®é¢å¯¹è€ƒç ”çš„å¿ƒæ€æ˜¯ï¼Ÿ", o: ["æˆ‘å·²ç»åšå¥½äº†å……è¶³çš„å‡†å¤‡ï¼Œè¿™æ¬¡ä¸€å®šç¾ç¾æ‹¿ä¸‹ï¼", "æˆ‘éš¾äººäº¦éš¾ï¼Œæˆ‘æŠŠé¢˜åšå®Œ", "ä¸¥è‚ƒä»¥å¾…çš„åŒæ—¶ä¿æŒå¹³å¸¸å¿ƒ", "ä»¥ä¸Šéƒ½æ˜¯"] },
            { t: "s", q: "6. è‹±è¯­ä½œæ–‡å¦‚æœä¸ç¡®å®šå•è¯æ‹¼å†™æ€ä¹ˆåŠï¼Ÿ", o: ["ç”Ÿæ¬ç¡¬å¥—ï¼Œç›¸ä¿¡è®°å¿†åŠ›", "æ¢åŒä¹‰è¯æˆ–è¿‘ä¹‰è¯", "å†™æ‹¼éŸ³ï¼Œä¸æ‰¹å·è€å¸ˆå¯¹æš—å·", "å†™ä¸­æ–‡"] },
            { t: "i", q: "7. è¯·è¾“å…¥ä¸€å¥ä½ æƒ³å¯¹è‡ªå·±è¯´çš„ç‹ è¯æˆ–é¼“åŠ±çš„è¯ï¼š", ph: "è€å¨˜æœ€æ£’..." },
            { t: "s", q: "8. è€ƒè¯•æœŸé—´é¥®é£Ÿæ–¹é¢åº”è¯¥æ³¨æ„ä»€ä¹ˆå‘¢ï¼Ÿ", o: ["åŒ–èº«æ¶é£Ÿç‹ï¼Œç«é”…å¥¶èŒ¶ä¸€é¡¿å¡", "å¤å¤©æ¸…å‡‰ç»„ï¼šè¥¿ç“œæ¨æ¢…å†»æ¢¨", "æ¸…æ·¡ã€æ¸©çƒ­ã€ä¸ƒåˆ†é¥±çš„é£Ÿç‰©", "æƒ³åƒä»€ä¹ˆåƒä»€ä¹ˆ"] },
            { t: "i", q: "9. è€ƒå®Œè¯•æƒ³åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯ä»€ä¹ˆï¼Ÿ", ph: "ç¡ä¸‰å¤©..." },
            { t: "i", q: "10. è¯·åœ¨æ¨ªçº¿ä¸Šç­¾ä¸‹ä½ çš„åå­—ï¼Œé¢†å–â€œå¥½è¿Buffâ€ï¼š", ph: "ç­¾åå¤„" },
            { t: "s", q: "11. ä½ å‡†å¤‡å¥½å»è¿æ¥ä½ çš„æœªæ¥äº†å—ï¼Ÿ", o: ["å‡†å¤‡å¥½äº†ï¼", "æ—¶åˆ»å‡†å¤‡ç€ï¼", "å†²å•Šï¼", "æˆ‘ä¸€å®šå¯ä»¥ï¼ï¼ï¼"] }
        ];

        let curIdx = 0;
        const qBox = document.getElementById('quiz-box');
        const pFill = document.getElementById('prog-fill');
        const nBtn = document.querySelector('.btn-next');

        function renderQ() {
            qBox.innerHTML = "";
            qs.forEach((item, i) => {
                const d = document.createElement('div');
                d.className = `quiz-step ${i===0?'active':''}`;
                let h = `<span class="quiz-question-text">${item.q}</span>`;
                if(item.t === 's') {
                    item.o.forEach(opt => h += `<div class="quiz-option-btn" onclick="sel(this)">${opt}</div>`);
                } else {
                    h += `<input class="input-line" placeholder="${item.ph}">`;
                }
                d.innerHTML = h;
                qBox.appendChild(d);
            });
        }
        function sel(el) {
            Array.from(el.parentElement.children).forEach(c=>c.classList.remove('selected'));
            el.classList.add('selected');
        }
        function nextQuestion() {
            const steps = document.querySelectorAll('.quiz-step');
            if(curIdx === qs.length - 1) {
                confetti({ particleCount: 150, spread: 100, origin: { y: 0.6 } });
                document.getElementById('result-modal').style.display = 'flex';
                return;
            }
            steps[curIdx].classList.remove('active');
            curIdx++;
            steps[curIdx].classList.add('active');
            pFill.style.width = `${(curIdx / (qs.length-1))*100}%`;
            if(curIdx === qs.length - 1) {
                nBtn.innerText = "âœ¨ æäº¤è¯•å· âœ¨";
                nBtn.style.background = "#FF8C42";
            }
        }
        renderQ();

        // 4. åˆ®åˆ®ä¹
        const cvs = document.getElementById('scratch-canvas');
        const ctx = cvs.getContext('2d');
        let draw = false;
        ctx.fillStyle = '#C0C0C0';
        ctx.fillRect(0,0,280,140);
        ctx.fillStyle = '#666'; 
        ctx.font='20px Arial'; 
        ctx.fillText("âœ¨ åˆ®å¼€æƒŠå–œ âœ¨", 80, 80);

        function scratch(e) {
            if(!draw) return;
            e.preventDefault();
            const r = cvs.getBoundingClientRect();
            const x = (e.clientX||e.touches[0].clientX) - r.left;
            const y = (e.clientY||e.touches[0].clientY) - r.top;
            ctx.globalCompositeOperation = 'destination-out';
            ctx.beginPath(); ctx.arc(x,y,15,0,Math.PI*2); ctx.fill();
        }
        cvs.addEventListener('mousedown',()=>draw=true);
        cvs.addEventListener('mouseup',()=>draw=false);
        cvs.addEventListener('mousemove',scratch);
        cvs.addEventListener('touchstart',(e)=>{draw=true;scratch(e)});
        cvs.addEventListener('touchmove',scratch);
        cvs.addEventListener('touchend',()=>draw=false);

        // 5. é¼ æ ‡å°ç…¤çƒ
        document.addEventListener('mousemove', (e) => {
            if(Math.random()>0.9) {
                const s = document.createElement('div');
                s.className='soot'; s.style.left=e.pageX+'px'; s.style.top=e.pageY+'px';
                document.body.appendChild(s);
                s.animate([{opacity:0.8, transform:'scale(0)'}, {opacity:0, transform:'translateY(-30px) scale(1.5)'}], {duration:800, fill:'forwards'});
                setTimeout(()=>s.remove(), 800);
            }
        });

    </script>
</body>
</html>
